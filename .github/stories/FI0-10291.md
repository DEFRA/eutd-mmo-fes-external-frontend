# User Story: FI0-10291 ✅

**Status:** ✅ COMPLETE - All acceptance criteria met

**As an** exporter

**I need to** be able to provide point of destination

**So that** my document complies with EU regulations

---

## Implementation Summary

- ✅ Frontend: Point of destination field added to what-export-journey page
- ✅ Backend: Joi validation (required, max 100 chars, allowed characters: a-zA-Z0-9-' /)
- ✅ Database: Field stored in exportData.pointOfDestination
- ✅ Translations: English and Welsh translations complete
- ✅ Tests: 5 Cypress E2E tests with MSW mock handlers
- ✅ Accessibility: GDS compliant with proper ARIA attributes
- ✅ Progressive enhancement: Works without JavaScript

---

## Acceptance Criteria

### Scenario 1 — Point of destination field exists ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **When** the page loads
- **Then** the "Point of destination" field exists underneath the "Select the destination country" field
- **And** the guidance text for "Point of destination" field is:
  > For example, Calais port, Calais-Dunkerque airport or the destination point of the consignment.
- **And** the field will be a free text field

### Scenario 2 — Point of destination not populated ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **When** I have not populated a point of destination
- **And** I press "Save and continue"
- **Then** a field-level error of "Enter the point of destination" is displayed
- **And** the error is shown in the error summary section at the top of the page
- **And** the details are not saved to the application
- **And** the "Export journey" section on "Your Progress" is marked as "Incomplete"

### Scenario 3 — Point of destination too long ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **When** I have entered a point of destination of more than 100 characters
- **And** I press "Save and continue"
- **Then** a field-level error of "Point of destination must not exceed 100 characters" is displayed
- **And** the error is shown in the error summary section at the top of the page
- **And** the details are not saved to the application
- **And** the "Export journey" section on "Your Progress" is marked as "Incomplete"

### Scenario 4 — Point of destination invalid characters ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **When** I have entered a point of destination containing characters other than letters, numbers, hyphens, apostrophes, spaces and forward slashes
- **And** I press "Save and continue"
- **Then** a field-level error of "Point of destination must only contain letters, numbers, hyphens, apostrophes, spaces and forward slashes" is displayed
- **And** the error is shown in the error summary section at the top of the page
- **And** the details are not saved to the application
- **And** the "Export journey" section on "Your Progress" is marked as "Incomplete"

### Scenario 5 — Invalid points of destination — Save as draft ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **When** I have entered an invalid point of destination (too long or invalid characters)
- **And** I press "Save as draft"
- **Then** the point of destination is saved (no validation on draft)
- **And** I am navigated to `/create-catch-certificate/catch-certificates` page

### Scenario 6 — Welsh translations ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **When** I have selected Welsh language
- **Then** all text is translated to Welsh

| English text | Welsh translation |
|:-------------|:------------------|
| Point of destination | Cyrchfan |
| For example, Calais port, Calais-Dunkerque airport or the destination point of the consignment. | Er enghraifft, porthladd Calais, maes awyr Calais-Dunkerque neu gyrchfan y llwyth. |
| Enter the point of destination | Rhowch y gyrchfan |
| Point of destination must not exceed 100 characters | Rhaid i'r gyrchfan fod yn llai na 100 o nodau |
| Point of destination must only contain letters, numbers, hyphens, apostrophes, spaces and forward slashes | Rhaid i'r gyrchfan gynnwys llythrennau, rhifau, cysylltnodau, collnodau, bylchau a blaenslaesau yn unig |

### Scenario 7 — Non-JavaScript ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **When** JavaScript is turned off
- **Then** the page must be fully usable and compliant with non-JavaScript behaviour (forms and navigation must work without client-side JS)
  - _Note: Remix.run provides progressive enhancement - forms work with standard HTML POST without JavaScript_

### Scenario 8 — Accessibility ✅

- **Given** I have navigated to `/what-export-journey` on my Catch Certificate user journey
- **Then** the page must be compliant with GDS accessibility guidelines
  - Uses GDS govuk-input, govuk-label, govuk-hint classes
  - Proper aria-describedby linking hint and error messages
  - Error messages include visually-hidden "Error:" prefix
  - Error styling with govuk-input--error and govuk-form-group--error
